1. IsParentOf relationships pattern for each node:

first selection	:	[options for relationships]
Star		:	[Star, E] or [Star, R]
A		:	[A, E] or [A, R]
M		:	[M, O]
O		:	[O, E] or [O, R] or [O, M]
E		:	[Star, E] or [A, E] or [O, E]
R		:	[Star, R] or [A, R] or [O, R]

So the total options for the relationship pattern is:  [Star, E], [Star, R], [A, E], [A, R], [M, O], [O, E], [O, R], and we select randomly in the pattern. Meantime a node cannot be a parent of himself.

2. And the pattern for IsChildOf is: select one in [Star, A, M, O],  and select one in [E, R]

We check in the patterns, （and  a node cannot have parent(s) with only 'R' or/and 'E' relationships， it can be promise by 1, if we do not give a relationship first go by E,R and notice the situation start with a node point to old one）